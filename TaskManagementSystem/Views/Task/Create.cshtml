@using TaskManagementSystem.Core.DTOs.Task
@model TaskRequestDto

<div class="container mt-4 col-md-6">
    <h3>Create Task</h3>

    <input id="Title" class="form-control mb-2" placeholder="Task Title" />
    <input id="Description" class="form-control mb-2" placeholder="Description" />
    <select id="TaskStatus" asp-for="TaskStatus" asp-items="@(new SelectList(ViewBag.TaskStatus, "Value", "Text"))" class="form-control">
            <option value="">-- Select Status --</option>
    </select>
     <select id="TaskPriority" asp-for="TaskPriority" asp-items="@(new SelectList(ViewBag.TaskPriority, "Value", "Text"))" class="form-control">
            <option value="">-- Select Priority --</option>
    </select>
    <input type="date" id="" class="form-control mb-2" placeholder="Due Date" />

    <button onclick="createTask()" class="btn btn-success">Save</button>
    <a asp-action="Index" class="btn btn-secondary">Back</a>
</div>

<script>
    function createTask() {
        var data = {
            title: $("#Title").val(),
            description: $("#Description").val(),
            status: $("#TaskStatus option:selected").text(),
            priority: $("#TaskPriority option:selected").text()
        };

        $.ajax({
            url: 'api/tasks/Create',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(data),
            success: function (res) {
                alert("Task Created Successfully!");
                window.location.href = "/Task/Index";
            }
        });
    }
</script>

